<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @user.name %>
</p>

<p>
  <strong>Birthdate:</strong>
  <%= @user.birthdate %>
</p>


<h3>Joined organizations</h3>

<table>
    <tbody>
        <% @user.groups.each do |group| %>
                <tr>
                  <td><%= link_to group.name, group %></td>
                </tr>
        <% end %>
    </tbody>
</table>

<h3>
  Assigned assignments
</h3>
<table>

  <thead>
  <tr>
    <td>Name</td>
    <td>Done</td>
    <td></td>
    <td colspan="3"></td>
  </tr>
  </thead>

  <tbody>
  <% @user.get_created_assignments.each do |assignment| %>
      <tr>
        <td><%= link_to assignment.name, assignment %></td>
        <td><%= assignment.is_done%></td>
        <td><%= link_to "Add workers", new_user_assignment_path(:assignment_id => assignment.id) if current_user.id == @user.id%></td>
      </tr>
  <% end %>
  </tbody>
</table>

<h3>Assigned to assignments</h3>
<table>

  <thead>
  <tr>
    <td>Name</td>
    <td>Status</td>
    <td>Tasks</td>
    <td></td>
    <td colspan="3"></td>
  </tr>
  </thead>

  <tbody>
  <% @user.assignments.each do |assignment| %>
      <tr>
        <td><%= link_to assignment.name, assignment %></td>
        <td><%=assignment.is_ready%></td>
        <td>
          <table>
            <tbody>
            <% assignment.tasks.each do |task| %>
                <tr>
                  <td><%=link_to task.name, task%></td>
                  <td><button>Mark as finished</button></td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>
