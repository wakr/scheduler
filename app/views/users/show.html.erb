<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @user.name %>
</p>

<p>
  <strong>Birthdate:</strong>
  <%= @user.birthdate %>
</p>


<h3>Joined organizations</h3>

<table>
    <tbody>
        <% @user.groups.each do |group| %>
                <tr>
                  <td><%= link_to group.name, group %></td>
                </tr>
        <% end %>
    </tbody>
</table>

<h3>
  Assigned assignments
</h3>
<table>

  <thead>
  <tr>
    <th>Name</th>
    <th>Done</th>
    <th></th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @user.get_created_assignments.each do |assignment| %>
      <tr>
        <td><%= link_to assignment.name, assignment %></td>
        <% if assignment.is_done %>
            <td><%= link_to assignment.is_done, assignment, method: :delete, data: {confirm: 'This item can be removed now. Are you sure?'}%></td>
        <% else %>
            <td><%= assignment.is_done%></td>
        <%end %>
        <td><%= link_to "Add workers", new_user_assignment_path(:assignment_id => assignment.id) if current_user.id == @user.id%></td>
      </tr>
  <% end %>
  </tbody>
</table>

<h3>Assigned to assignments</h3>
<table>

  <thead>
  <tr>
    <th>Name</th>
    <th>Status</th>
    <th></th>
    <th></th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @user.assignments.each do |assignment| %>
      <tr>
        <td><%= link_to assignment.name, assignment %></td>
        <td><%=assignment.is_ready%></td>
        <td>

          <table>
            <thead>
            <th>Task name</th>
            <th>Done</th>
            <th colspan="3"></th>
            </thead>
            <tbody>
            <% assignment.tasks.each do |task| %>
                <tr>
                  <td><%=link_to task.name, task%></td>
                  <td><%=task.is_done%></td>
                  <td><%=button_to "Mark as done", mark_done_path(:id => task.id), method: :post if not task.is_done%></td>
                </tr>
            <% end %>
            <td><br></td>
            </tbody>
          </table>

        </td>
      </tr>
  <% end %>
  </tbody>
</table>
